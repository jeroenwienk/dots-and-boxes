(this.webpackJsonpdotsandboxes=this.webpackJsonpdotsandboxes||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(5),r=n.n(i),o=(n(15),n(3)),s=n(2),u=n(1),l=n(6),h=n(7),p=n(8),d=n(9);n(16);function y(e){var t=e.id,n=e.x1,i=e.y1,r=e.x2,s=e.y2,l=e.occupiedLinesMap,h=e.onClick,p=e.config,d=Object(a.useState)(!1),y=Object(o.a)(d,2),f=y[0],g=y[1],m={stroke:f?"#FAFAFA":"#9E9E9E",strokeWidth:4},v=l[t];return null!=v&&(m.stroke=p.colors.players[v.occupiedBy]),c.a.createElement(c.a.Fragment,null,c.a.createElement("line",{id:"display-".concat(t),x1:n,y1:i,x2:r,y2:s,style:m}),c.a.createElement("line",{id:t,x1:n,y1:i,x2:r,y2:s,style:Object(u.a)({},m,{strokeWidth:6*m.strokeWidth,strokeOpacity:0,cursor:"pointer"}),onClick:v?void 0:h,onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)}}))}y.VERTICAL="vertical",y.HORIZONTAL="horizontal";var f=y;var g=function(e){var t=e.id,n=e.x,a=e.y,i=e.width,r=e.height,o=e.tile,s=e.config,u={strokeWidth:1,stroke:"#000000",fill:"#000000",opacity:0};return o.occupiedBy&&(u.stroke=s.colors.players[o.occupiedBy],u.fill=s.colors.players[o.occupiedBy],u.opacity=1),c.a.createElement("rect",{id:t,width:i,height:r,x:n,y:a,style:u})},m=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={config:{width:800,height:800,rows:5,columns:5,offset:6,colors:{players:{1:"#61dafb",2:"#B2FF59"}}},playerNum:1,occupiedLinesMap:{},tilesMatrix:[]},e.init=function(){for(var t=e.state.config,n=[],a=0;a<t.rows;a++){n.push([]);for(var c=0;c<t.columns;c++)n[a].push({row:a,column:c,count:0,occupiedBy:null})}e.setState({tilesMatrix:n,occupiedLinesMap:{},playerNum:Math.random()>.5?1:2})},e.handleLineClick=function(t){var n=e.state,a=n.tilesMatrix,c=n.occupiedLinesMap,i=n.playerNum,r=t.currentTarget.id,o={},l=!1;e.getAdjacentTiles(a,r).forEach((function(e){var t="".concat(e.row).concat(e.column),n=Object(u.a)({},e);n.count+1<4?n.count++:(n.count++,n.occupiedBy=i,l=!0),o[t]=n})),e.setState({occupiedLinesMap:Object(u.a)({},c,Object(s.a)({},r,{occupiedBy:i})),tilesMatrix:e.getUpdatedTilesMatrix(a,o),playerNum:l?i:e.getNextPlayerNum()})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"getNextPlayerNum",value:function(){return 1===this.state.playerNum?2:1}},{key:"getAdjacentTiles",value:function(e,t){var n=t.split("-"),a=Object(o.a)(n,3),c=a[0],i=a[1],r=a[2];i=parseInt(i,10),r=parseInt(r,10);var s=[];return c===f.HORIZONTAL?0===i?s.push(e[i][r]):i===e.length?s.push(e[i-1][r]):(s.push(e[i-1][r]),s.push(e[i][r])):c===f.VERTICAL&&(0===r?s.push(e[i][r]):r===e[0].length?s.push(e[i][r-1]):(s.push(e[i][r-1]),s.push(e[i][r]))),s}},{key:"getUpdatedTilesMatrix",value:function(e,t){return e.map((function(e){return e.map((function(e){var n="".concat(e.row).concat(e.column);return t[n]||e}))}))}},{key:"getCoordinates",value:function(e,t,n){var a=this.state.config,c=a.width,i=a.height,r=a.rows,o=a.columns,s=a.offset,u=(c-2*s)/o,l=(i-2*s)/r;return{x1:t*u+s,y1:e*l+s,x2:(t+(n?0:1))*u+s,y2:(e+(n?1:0))*l+s,xLength:u,yLength:l}}},{key:"getLineKey",value:function(e,t,n){return"".concat(n?f.VERTICAL:f.HORIZONTAL,"-").concat(e,"-").concat(t)}},{key:"getLine",value:function(e,t,n){var a=this.state,i=a.occupiedLinesMap,r=a.config,o=this.getCoordinates(e,t,n),s=this.getLineKey(e,t,n);return c.a.createElement(f,{id:s,key:s,x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,occupiedLinesMap:i,config:r,onClick:this.handleLineClick})}},{key:"renderLines",value:function(){var e=this,t=this.state.tilesMatrix,n=[];return t.forEach((function(a,c){return a.forEach((function(i,r){n.push(e.getLine(i.row,i.column,!1)),n.push(e.getLine(i.row,i.column,!0)),c===t.length-1&&n.push(e.getLine(i.row+1,i.column,!1)),r===a.length-1&&n.push(e.getLine(i.row,i.column+1,!0))}))})),n}},{key:"renderRectangles",value:function(){var e=this,t=this.state,n=t.tilesMatrix,a=t.config,i=[];return n.forEach((function(t){return t.forEach((function(t){var n=e.getCoordinates(t.row,t.column,!1),r=n.xLength/12,o=n.xLength/12,s="rect-".concat(t.row,"-").concat(t.column);i.push(c.a.createElement(g,{id:s,key:s,x:n.x1+r,y:n.y1+o,width:n.xLength-2*r,height:n.yLength-2*o,tile:t,config:a}))}))})),i}},{key:"render",value:function(){var e=this.state,t=e.tilesMatrix,n=e.playerNum,a=this.state.config,i=a.width,r=a.height,o=a.colors,s=t.reduce((function(e,t){return t.forEach((function(t){t.occupiedBy&&(e[t.occupiedBy]+=1)})),e}),{1:0,2:0});return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("div",null,c.a.createElement("span",{style:{fontSize:64,color:o.players[1]}},s[1]),c.a.createElement("span",{style:{fontSize:64}},"\xa0:\xa0"),c.a.createElement("span",{style:{fontSize:64,color:o.players[2]}},s[2])),c.a.createElement("div",{style:{width:256,height:32,backgroundColor:o.players[n]}}),c.a.createElement("button",{className:"Button",onClick:this.init},"Reset")),c.a.createElement("div",{className:"App-content"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 ".concat(i," ").concat(r)},this.renderLines(),this.renderRectangles())))}}]),n}(c.a.Component);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.a4299d75.chunk.js.map